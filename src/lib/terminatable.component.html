<div id="terminatable">
    <div class="table-caption" *ngIf="caption">
        <ng-container [ngTemplateOutlet]="caption"></ng-container>
    </div>
    <div class="table-container" [style.height]="_tableContainerHeight">
        <table [class]=cssClass>
            <thead>
                <tr>
                    <th *ngIf="multiSelection" class="freeze">
                        <lib-checkbox #selectAll [value]="undefined"
                            (onChangeAllEmitter)="onChangeAll($event)"></lib-checkbox>
                    </th>
                    <th *ngFor="let column of _columns; let i = index" #columnDragbox
                        [draggable]="column.isFrozen ? false : [orderTypes.columns, orderTypes.both].includes(orderable)"
                        (dragstart)="columnDragStart(i)" (dragover)="columnDragOver($event, i)" (drop)="columnDrop(i)"
                        scope="col" [class]="column.isFrozen ? 'freeze' : ''" [style.left]="multiSelection ? '3.25rem' : 0"
                        [style.cursor]="[orderTypes.columns, orderTypes.both].includes(orderable) && !column.isFrozen ? 'move' : ''"
                        [style.minWidth.px]="column.width">
                        <span>
                            {{column.title}}
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody [ngClass]="[strip ? 'strip' : '', hoverable ? 'hoverable' : '', rowSelection ? 'selectable': '']">
                <div *ngIf="tbody;then tbodyContent else noTbodyContent"></div>
                <ng-template #tbodyContent>
                    <ng-container [ngTemplateOutlet]="tbody"></ng-container>
                </ng-template>

                <ng-template #noTbodyContent>
                    <tr *ngFor="let row of _data | pagination:paginationEvent; let i = index" #rowDragbox
                        (click)="selectRow(row)" [draggable]="[orderTypes.rows, orderTypes.both].includes(orderable)"
                        (dragstart)="rowDragStart(i)" (dragover)="rowDragOver($event, i)" (drop)="rowDrop(i)"
                        [class]="(!!selectedRow && selectedRow[uniqueField] === row[uniqueField]) ? 'selected': ''">
                        <td *ngIf="multiSelection" class="freeze">
                            <lib-checkbox [value]="row" (onChangeEmitter)="onChangeOne($event)"></lib-checkbox>
                        </td>
                        <td *ngFor="let column of _columns" [class]="column.isFrozen ? 'freeze' : ''"
                            [style.left]="multiSelection ? '3.25rem' : 0" [style.minWidth.px]="column.width">
                            <span>
                                {{row[column.field]}}
                            </span>
                        </td>
                    </tr>
                </ng-template>
            </tbody>
        </table>
    </div>

    <div class="table-footer" *ngIf="!!footer || !!pageable || !!rowSize">
        <div *ngIf="(!!pageable && !!rowSize);then paginationTemplate else footerTemplate"></div>
        <ng-template #paginationTemplate>
            <lib-pagination #pagination *ngIf="!!pageable" [data]="_data"
                [limit]="rowSize" (onSelectedPage)="onSelectedPage($event)"></lib-pagination>
        </ng-template>
        <ng-template #footerTemplate>
            <ng-container [ngTemplateOutlet]="footer"></ng-container>
        </ng-template>
    </div>
</div>